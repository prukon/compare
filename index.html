<div id="compareWrap">
    <span class="wrap-area"><h4>Общий список</h4><textarea class="textarea" id="compareFirst"></textarea></span>
    <span class="wrap-area"><h4>Вычитаемый список</h4><textarea class="textarea"  id="compareSecond"></textarea></span>
    <span class="wrap-area"><h4>Результат</h4><textarea  class="textarea" id="compareResult"></textarea></span>

    <div id="buttonsWrap">
    <button id="pushCompare">Сравнить</button>
    <button id="cleanCompare">Очистить</button>
    </div>
</div>

<script>
    // обработка артикулов
    function сomparison(a1, a2) {
        var a = [], diff = [];
        for (var i = 0; i < a1.length; i++)
            a[a1[i]] = true;
        for (var i = 0; i < a2.length; i++)
            if (a[a2[i]]) delete a[a2[i]];
            else a[a2[i]] = true;
        for (var k in a)
            diff.push(k);
        // diff.split(',');
        return diff
    }


    var pushCompare = document.querySelector('#pushCompare');
    var cleanCompare= document.querySelector('#cleanCompare');
    pushCompare.addEventListener('click', function () {
        var compareFirst = document.querySelector('#compareFirst').value.split('\n');
        var compareSecond = document.querySelector('#compareSecond').value.split('\n');
        var compareResult = document.querySelector('#compareResult');
        var compareResultString = сomparison(compareSecond, compareFirst);


        compareResultLine=[];
        for (let i=0;i<compareResultString.length;i++){
            compareResultLine = compareResultLine + compareResultString[i] +"\n";
        }


        compareResult.value = compareResultLine;
        console.log(compareResultString);

        // var compareResultLine = compareResultString.split(',');
        // console.log(compareResultLine);


    });
    cleanCompare.addEventListener('click', function () {
        document.querySelector('#compareFirst').value = '';
        document.querySelector('#compareSecond').value = '';
        document.querySelector('#compareResult').value = '';
    });

</script>
